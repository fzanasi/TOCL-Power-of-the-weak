\section{One-step logics, parity automata and $\mu$-calculi}
   \label{sec:parityaut}

This section introduces and studies the type of parity automata that will be
used in the characterisation of $\wmso$ and $\nmso$ on tree models. 
In order to define these automata in a uniform way, we introduce, at a slightly
higher level of abstraction, the notion of a \emph{one-step logic}, a concept 
from coalgebraic modal logic~\cite{cirs:modu04} which provides a nice framework 
for a general approach towards the theory of automata operating on infinite
objects.
As salient specimens of such one-step logics we will discuss monadic 
first-order logic with equality ($\ofoe$) and its extension with the infinity 
quantifier ($\ofoei$).
We then define, parametric in the language $\oslang$ of such a one-step logic, 
the notions of an $\oslang$-automaton and of a mu-calculus $\mu\oslang$, 
and we show how various classes of $\oslang$-automata effectively correspond 
to fragments of $\mu\oslang$.

\subsection{One-step logics and normal forms}
\label{sec:onestep-short}
\label{ssec:onestep}

\begin{definition}\label{def:one-step}
Given a finite set $A$ of monadic predicates, a \emph{one-step model} is
a pair $(D, V)$ consisting of a \emph{domain} set $D$ and a \emph{valuation}
or \emph{interpretation} $V : A \to \pow D$. 
Where $B \subseteq A$, we say that $V' : A \to \pow D$ is a 
\emph{$B$-extension of} $V : A \to \pow D$, notation $V \leq_{B} V'$,
if $V(b) \subseteq V'(b)$ for every $b \in B$ and $V(a) = V'(a)$ 
for every $a \in A \setminus B$. 

A \emph{one-step language} is a map assigning \textcolor{blue}{to any set $A$ a 
collection $\oslang(A)$} of objects \textcolor{blue}{that we will refer to as}
\emph{one-step formulas} over $A$. 
We assume that one-step languages come with a \emph{truth} relation $\models$
between one-step formulas and models, writing $(D, V) \models \phi$ to
denote that $(D,V)$ satisfies $\phi$.
\end{definition}

Note that we do allow the (unique) one-step model that is based on the empty
domain; we will simply denote this model as $(\nada,\nada)$.

Our chief examples of one-step languages will be variations of modal and 
first-order logic.

\begin{definition}
\label{d:oml}
%A very simple example of a one-step logic is the following 
\textcolor{blue}{For a set 
$A$ of monadic predicates, the corresponding \emph{basic one-step
modal logic} $\oml(A)$ is the language defined as}:
\[
\oml(A) \isdef \{ \Diamond a, \Box a \mid a \in A \}.
\]
The semantics of these formulas is given by
\begin{align*}
   (D, V) \models \Diamond a & \quad\text{ iff }\quad  V(a) \neq \nada
\\ (D, V) \models \Box a     & \quad\text{ iff }\quad  V(a) = D.
\end{align*}
\end{definition}

\begin{definition}
The one-step language $\ofoe(A)$ of \emph{first-order logic with equality} on 
a set of predicates $A$ and individual variables $\fovar$ is given by the 
sentences (formulas without free variables) generated by the following grammar,
where $a \in A$ and $x,y\in\fovar$.:
\begin{equation}\label{eq:grammarofoe}
\phi \isbnf  a(x) \mid \lnot a(x) \mid x \foeq y \mid x \not\foeq y \mid \exists x.\phi \mid \forall x.\phi \mid \phi \lor \phi \mid \phi \land \phi
\end{equation}
We use $\ofo$ for the equality-free fragment, where we omit the clauses 
$x \foeq y$ and $x \not\foeq y$.
\end{definition}

The interpretation of this language in a model $(D,V)$ with $D \neq \nada$
is completely standard.
Formulas of $\ofo$ and $\ofoe$ are interpreted inductively by augmenting 
the pair $(D,V)$ with a variable assignment $g: \fovar \to D$. 
The semantics then defines the desired truth relation $(D, V),g \models \phi$ 
between one-step models, assignments and one-step formulas.
As usual, the variable assignment $g$ can and will be omitted when we are
dealing with sentences --- and note that we only take sentences as one-step 
formulas.
For the interpretation in one-step models with empty domain we refer to 
Definition~\ref{d:ed}.

% \begin{align*}
% (D, V),g \models a(x) & \quad\text{ iff }\quad  
%   x \in V(a) 
% \\ (D, V),g \models \lnot a(x) & \quad\text{ iff }\quad  
%   x \not\in V(a) 
% \\ (D, V),g \models x \foeq y & \quad\text{ iff }\quad 
%   g(x) = g(y) 
% \\ (D, V),g \models x \not\foeq y & \quad\text{ iff }\quad 
%   g(x) \neq g(y) 
% \\
% (D, V),g \models \phi\lor\psi & \quad\text{ iff }\quad  
%    (D, V),g \models \phi \text{ or } (D,V),g \models \psi 
% \\ (D, V),g \models \phi\land\psi & \quad\text{ iff }\quad  
%    (D, V),g \models \phi \text{ and } (D,V) ,g \models \psi 
% \\ (D, V),g \models \exists x.\phi & \quad\text{ iff }\quad  
%    \text{there is $s \in D$ such that $(D, V), g[x\mapsto s] \models \phi$}
% \\ (D, V),g \models \forall x.\phi & \quad\text{ iff }\quad  
%    \text{for all $s \in D$, } (D, V), g[x\mapsto s] \models \phi.
% \end{align*}

We now introduce an extension of first-order logic with two additional
quantifiers, which first appeared in the context of Mostowski's 
study~\cite{Mostowski1957} of generalised quantifiers. 
The first, written $\qu x. \phi$, expresses that there exist infinitely many
elements satisfying a formula $\phi$. 
Its dual, written $\dqu x. \phi$, expresses that there are \emph{at most 
finitely many} elements \emph{falsifying} the formula $\phi$. 
Formally:
\begin{equation}\label{eq:definfquant}
\begin{aligned}
 (D,V),g \models \qu x. \phi(x) & \quad\text{iff}\quad 
   |\{s\in D \mid (D, V),g[x\mapsto s] \models \phi(x) \}| \geq \om
\\ (D,V),g \models \dqu x. \phi(x) & \quad\text{iff}\quad 
   |\{s\in D \mid (D, V),g[x\mapsto s] \not\models \phi(x) \}| < \om
\end{aligned}
\end{equation}

\begin{definition}
\label{d:ofoei}
The one-step language $\ofoei(A)$ is defined by adding to the grammar 
\eqref{eq:grammarofoe} of $\ofoe(A)$ the cases $\qu x. \phi$ and $\dqu x. \phi$.
In the case of non-empty models, the truth relation $(D, V),g \models \phi$ is 
defined by extending the truth relation for $\ofoe(A)$ with the clauses
\eqref{eq:definfquant}.
\end{definition}

In the case of models with empty domain, we cannot give an inductive definition
of the truth relation using variable assignments.
Nevertheless, a definition of truth can be provided for formulas that are Boolean combinations of sentences of the form $Qx.\phi$, where $Q \in \{\exists, \qu,  \forall, \dqu\}$ is a quantifier.

\begin{definition}
\label{d:ed}
For the empty one-step model $(\nada,\nada)$ we define the truth relation as 
follows:
%For every formula $\phi \in \ofoei(A)$ 
For every sentence $Qx.\phi$, where $Q \in \{\exists, \qu,  \forall, \dqu\}$,
we set
\[\begin{array}{lllllll}
     (\nada,\nada) & \not\models & Qx. \phi
   & \quad\text{ if } \quad
   & Q \in  \{\exists, \qu \}
   %(\nada,\nada) & \not\models & \qu \phi
\\ (\nada,\nada)   & \models & Qx. \phi
   & \quad\text{ if } \quad
   & Q \in  \{\forall, \dqu \},
   %(\nada,\nada) & \models & \dqu \phi,
\end{array}\]
and we extend this definition to arbitrary $\ofoei$-sentences via the standard
clauses for the boolean connectives.
\end{definition}

For various reasons it will be convenient to assume that our one-step languages
are closed under taking (boolean) duals.
Here we say that the one-step formulas $\phi$ and $\psi$ are \emph{boolean duals}
if for every one-step model we have $(D,V) \models \phi$ iff $(D,V^{c})
\not\models \psi$, where $V^{c}$ is the complement valuation given by $V^{c}(a)
\isdef D \setminus V(a)$, for all $a$.

As an example, it is easy to see that for the basic one-step modal logic $\oml$
the formulas $\Diamond a$ and $\Box a$ are each other's dual.
In the case of the monadic predicate logics $\ofo$, $\ofoe$ and $\ofoei$ we can 
define the boolean dual of a formula $\phi$ by a straightforward induction.

\begin{definition}
\label{def:concreteduals} 
For $\oslang \in \{ \ofo, \ofoe, \ofoei \}$, we define the following operation
on formulas:
\begin{align*}
 (a(x))^{\delta} & \isdef  a(x) 
 & (\lnot a(x))^{\delta} & \isdef  \lnot a(x) 
\\ (\top)^{\delta} & \isdef  \bot 
  & (\bot)^{\delta} & \isdef  \top 
\\  (x \approx y)^{\delta} & \isdef  x \not\approx y 
  & (x \not\approx y)^{\delta}& \isdef  x \approx y 
\\ (\phi \wedge \psi)^{\delta} &\isdef  \phi^{\delta} \vee \psi^{\delta} 
  &(\phi \vee \psi)^{\delta}& \isdef  \phi^{\delta} \wedge \psi^{\delta}
\\ (\exists x.\psi)^{\delta} &\isdef  \forall x.\psi^{\delta} 
  &(\forall x.\psi)^{\delta} &\isdef  \exists x.\psi^{\delta} 
\\ (\qu x.\psi)^{\delta} &\isdef \dqu x.\psi^{\delta} 
  &(\dqu x.\psi)^{\delta} &\isdef  \qu x.\psi^{\delta}
\end{align*}
\end{definition}
We leave it for the reader to verify that the operation $\dual{(\cdot)}$ indeed 
provides a boolean dual for every one-step sentence.
\medskip

The following semantic properties will be essential when studying the 
parity automata and $\mu$-calculi associated with one-step languages.

\begin{definition}\label{def:semnotions} 
Given a one-step language $\oslang(A)$, $\phi \in \oslang(A)$ and $B \sse A$,
\begin{itemize}
\item 
$\phi$ is \emph{monotone} in $B$ if for all pairs of one step models $(D,V)$ 
and $(D,V')$ with $V \leq_{B} V'$, $(D,V) \models \phi$ implies $(D,V'),g 
\models \phi$.
\item 
$\phi$ is \emph{$B$-continuous} if $\phi$ is monotone in $B$ and, whenever 
$(D,V) \models \phi$, then there exists $V' \: A \to \pow(D)$ such that 
$V' \leq_{B} V$, $(D,V') \models \phi$ and $V'(b)$ is finite for all $b \in B$.
%\item $\phi$ is \emph{functionally continuous} in $B \subseteq A$ if, whenever $(D,V) \models \phi$, then there exists a restriction $V' \: A \to \pow(D)$ of $V$ witnessing both functionality and continuity in $B$.
\item 
$\phi$ is \emph{$B$-cocontinuous} if its dual $\phi^{\delta}$ is continuous in 
$B$.
\end{itemize}
\end{definition}

\textcolor{red}{
\begin{example}
Fix a set $A$ of monadic predicates, a subset $B \sse A$ and a $b \in B$.
\begin{enumerate}[(1)]
\item
It is easy to see that a formula $\phi$ is monotone in $B$ if all predicates
from $B$ occur only positively in $\phi$ (i.e., in the scope of an even number
of negations).
For simple formulas that are not monotone in $b$, consider for instance 
$\neg  \exists x b(x)$ or $\forall x (a(x) \lor \neg b(x))$.
On the other hand, the formula $\forall x(b(x) \lor \neg b(x))$, although
it features a negative occurrence of $b$, is monotone in $b$.
\item 
Typical formulas that are continuous in $b$ are $\exists x\, b(x)$ and 
$\exists x_{1} \exists x_{2} (x_{1} \not\approx x_{2} \land b(x_{1}) \land 
b(x_{2}))$.
For a typical counterexample, take the formula $\forall x\, b(x)$.
\item
Particularly interesting $\ofoei$-formulas that are continuous in $B$ may be
obtained using the abbreviated quantifier $\wqu$ given by
\begin{equation}
\label{eq:wqu}
\wqu x.(\phi,\psi) \isdef 
\forall x.(\phi(x) \lor \psi(x)) \land \dqu x.\psi(x).
\end{equation}
In words, $\wqu x.(\phi,\psi)$ states that every element of the domain validates 
$\phi(x)$ or $\psi(x)$, but only finitely many need to validate $\phi(x)$.
As a consequence, if $\phi$ is continuous in $B$, and no $b \in B$ occurs in 
$\psi$, then the formula $\wqu x.(\phi,\psi)$ will be continuous in $B$.
Thus $\dqu$ makes a certain use of the universal quantifier compatible with
the notion of continuity.
\end{enumerate}
%
\end{example}
}

We recall from \cite{carr:mode18} syntactic characterisations of 
these semantic properties, relative to the monadic predicate logics $\ofo$, 
$\ofoe$ and $\ofoei$. 
We first discuss characterisations of monotonicity and (co)continuity given by
grammars. 

\begin{definition}
For $\oslang \in \{ \ofo, \ofoe, \ofoei \}$, we define the \emph{positive} 
fragment of $\oslang(A)$, written $\oslang^{+}(A)$, as the set of sentences 
generated by the grammar we obtain by leaving out the clause $\lnot a(x)$
from the grammar for $\oslang$.
 
For $B \subseteq A$, the \emph{$B$-continuous} fragment of $\ofoe(A)$, written
$\cont{\ofoe(A)}{B}$, is the set of sentences generated by the following
grammar:
\begin{equation}\label{eq:Bcont}
\phi \isbnf  b(x) \mid \psi \mid \phi \land \phi \mid \phi \lor \phi 
   \mid \exists x.\phi,
\end{equation}
for $b \in B$ and $\psi \in \ofoe^{+}(A \setminus B)$.
\textcolor{blue}{When $\psi \in \ofo^{+}(A \setminus B)$, the grammar
\eqref{eq:Bcont} above generates the $B$-continuous fragment $\cont{\ofo(A)}{B}$
of $\ofo(A)$.
}
\textcolor{red}{
Finally, the  \emph{$B$-continuous} fragment of $\ofoei(A)$, written 
$\cont{\ofoei(A)}{B}$, is generated as follows:
\begin{equation}\label{eq:Bcont-oo}
\phi \isbnf  b(x) \mid \psi \mid \phi \land \phi \mid \phi \lor \phi 
   \mid \exists x.\phi
   \mid \wqu x.(\phi,\psi),
\end{equation}
where $b \in B$, $\psi \in (\ofoei)^{+}(A \setminus B)$, and 
$\wqu x.(\phi,\psi)$ is defined as in \eqref{eq:wqu}. 
}

For $\oslang \in \{ \ofo, \ofoe,\ofoei \}$ and $B \subseteq A$, the 
\emph{$B$-cocontinuous} fragment of $\oslang(A)$, written 
$\cocont{\oslang(A)}{B}$, is the set $\{\phi \mid \phi^\delta \in 
\cont{\oslang(A)}{B}\}$.
\end{definition}

Note that we do allow the clause $x \not\foeq y$ in the positive fragments of 
$\ofoe$ and $\ofoei$.

The following result provides syntactic characterizations for the mentioned 
semantics properties.

\begin{theorem}[\cite{carr:mode18}] 
    \label{th:onesteplogics-grammars}
For $\oslang \in \{\ofo, \ofoe,\ofoei \}$, let $\phi \in \oslang(A)$ be 
a one-step formula.
Then

\begin{enumerate}[(1)]
\item
$\phi \in \oslang(A)$ is $A$-monotone iff it is equivalent to some 
$\psi \in \oslang^{+}(A)$. 

\item
$\phi \in \oslang(A)$ is $B$-continuous iff it is equivalent to some $\psi \in
\cont{\oslang(A)}{B}$. 

\item
$\phi \in \oslang(A)$ is $B$-cocontinuous iff it is equivalent to some $\psi \in
\cocont{\oslang(A)}{B}$. 
\end{enumerate}
\end{theorem}

\begin{proof}
The first two statements are proved in \cite{carr:mode18}. 
The third one can be verified by a straightforward induction on $\phi$. 
\end{proof}

In some of our later proofs we need more precise information on the shape of
formulas belonging to certain syntactic fragments.
For this purpose we introduce normal forms for positive sentences in $\ofo$, 
$\ofoe$ and $\ofoei$. 

\begin{definition}%[Basic form for \ofoe] 
\label{def:basicform-ofoe}
\label{def:basicform-ofoei}
A \emph{type} $T$ is just a subset of $A$. It defines a $\ofoe$-formula 
\[
\tau^{+}_T(x) \df \bigwedge_{a \in T} a(x).
\]
Given a one-step model $(D,V)$, $s \in D$ \emph{witnesses} a type $T$ if 
$(D,V), g[x\mapsto s] \models \tau^{+}_T(x)$ for \textcolor{blue}{some (or, 
equivalently, each) 
assignment} $g$. 
The predicate $\arediff{\vlist{y}}$, stating that the elements $\vlist{y}$ are 
distinct, is defined as $\arediff{y_1,\dots,y_n} \isdef 
\bigwedge_{1\leq m < m^{\prime} \leq n} (y_m \not\approx y_{m^{\prime}})$.


\textcolor{red}{%
A formula $\phi \in \ofo(A)$ is said to be in \emph{basic form} if it is of the 
shape $\phi = \bigvee \posdgbnfofo{\Sigma}{\Pi}$, where for sets $\Sigma,\Pi\sse
A$ of types, the formula 
$\posdgbnfofo{\Sigma}{\Pi} \in  \ofo(A)$ is defined as 
\begin{equation*}%\label{eq:normalformofoe}
\posdgbnfofo{\Sigma}{\Pi} \isdef 
\bigwedge_{S \in \Sigma} \exists x\, \tau^{+}_{S}(x) 
\land 
\forall z. \bigvee_{S\in \Pi} \tau^{+}_S(z).
\end{equation*}
}
We say that $\phi \in \ofoe(A)$ is in \emph{basic form} if \textcolor{blue}{it is
a disjunction of formulas of the form $\posdbnfofoe{\vlist{T}}{\Pi}$}, 
%$\phi = \bigvee \posdbnfofoe{\vlist{T}}{\Pi}$, 
where each disjunct is of the form
%
\begin{equation*}%\label{eq:normalformofoe}
\posdbnfofoe{\vlist{T}}{\Pi} \isdef 
\exists \vlist{x}.\big(\arediff{\vlist{x}} \land \bigwedge_i \tau^{+}_{T_i}(x_i) 
\land 
\forall z.(\arediff{\vlist{x},z} \to \bigvee_{S\in \Pi} \tau^{+}_S(z))\big)
\end{equation*}
%
such that $\vlist{T} = (T_{1},\ldots,T_{k}) \in \pow(A)^k$ for some $k$ and 
\textcolor{blue}{$\Pi \subseteq \{T_1, \dots, T_k\}$}. 

Finally, we say that $\phi \in \ofoei(A)$ is in \emph{basic form} if 
\textcolor{blue}{it is a disjunction of formulas of the form 
$\posdbnfofoei{\vlist{T}}{\Pi}{\Sigma}$},
%$\phi = \bigvee \posdbnfofoei{\vlist{T}}{\Pi}{\Sigma}$ 
where each disjunct is of the form
\begin{align*}
   \posdbnfofoei{\vlist{T}}{\Pi}{\Sigma} &\isdef
  \posdbnfofoe{\vlist{T}}{\Pi \cup \Sigma} \land \posdbnfinf{\Sigma}
\\ \posdbnfinf{\Sigma} &\isdef 
   \bigwedge_{S\in\Sigma} \qu y.\tau^{+}_S(y) \land 
      \dqu y.\bigvee_{S\in\Sigma} \tau^{+}_S(y)
\end{align*}
for some sets of types $\Pi,\Sigma \subseteq \pow A$ and $T_1, \dots, T_k 
\subseteq A$.
\end{definition}

% Intuitively, the basic $\ofo$-formula $\posdgbnfofo{\Sigma}{\Sigma}$ simply 
% states that $\Sigma$ covers a one-step model, in the sense that each element of
% its domain witnesses some type $S$ of $\Sigma$ and each type $S$ of $\Sigma$ is 
% witnessed by some element.
Intuitively, the basic $\ofo$-formula $\posdgbnfofo{\Sigma}{\Pi}$ simply states 
that every type $S \in \Sigma$ is witnessed in the model and at the same time, 
every element of the domain witnesses some type in $\Pi$.\footnote{%
   \color{red}
   In fact, it is not hard to show that every formula of the form 
   $\posdgbnfofo{\Sigma}{\Pi}$ is equivalent to a disjunction of 
   formulas of the form $\posdgbnfofo{\Gamma}{\Gamma}$, which are closely
   related to the disjunctive formulas that feature in the work of Janin and 
   Walukiewicz.
   In principle we could simplify our basic $\ofo$-form further, to 
   formulas of the form $\posdgbnfofo{\Gamma}{\Gamma}$; for the characterisation
   of continuity in Theorem~\ref{t:osnf-cont}, however, this format is not 
   suitable.
   }
The formula $\posdbnfofoe{\vlist{T}}{\Pi}$ says that each one-step
model satisfying it admits a partition of its domain in two parts: distinct 
elements $t_1,\dots,t_n$ witnessing types $T_1,\dots,T_n$, and all the remaining
elements witnessing some type $S$ of $\Pi$.  
The formula $\posdbnfinf{\Sigma}$ extends the information given by
$\posdbnfofoe{\vlist{T}}{\Pi \cup \Sigma}$ by saying that (1) for every type 
$S\in\Sigma$, there are infinitely many elements witnessing each $S \in \Sigma$
and (2) only finitely many elements do not satisfy any type in $\Sigma$. 

The next theorem states that the basic formulas indeed provide normal forms.

\begin{theorem}[\cite{carr:mode18}]  
\label{t:osnf}
For each $\oslang \in \{\ofo, \ofoe,\ofoei \}$ there is an effective procedure 
transforming any sentence $\phi \in \oslang^{+}(A)$ into an equivalent
sentence $\phi^{\bullet}$ in basic $\oslang$-form.
\end{theorem}

One may use these normal forms to provide a tighter syntactic characterisation
for the notion of continuity, in the cases of $\ofo$ and $\ofoei$.

\begin{theorem}[\cite{carr:mode18}]  
\label{t:osnf-cont}
\begin{enumerate}

\item 
A formula $\phi \in \ofo(A)$ is continuous in $B \subseteq A$ iff it is
equivalent to a formula, effectively obtainable from $\phi$, in the basic form 
\textcolor{blue}{$\bigvee \posdgbnfofo{\Sigma}{\Pi}$} 
where we require that $B \cap \bigcup\Pi = \nada$ for every $\Pi$.

\item A formula $\phi \in \ofoei(A)$ is continuous in $B \subseteq A$ iff it is
equivalent to a formula, effectively obtainable from $\phi$, in the basic form 
$\bigvee \mondbnfofoei{\vlist{T}}{\Pi}{\Sigma}{+}$, 
where we require that $B \cap \bigcup\Sigma = \nada$ for every $\Sigma$.
\end{enumerate}
\end{theorem}

\begin{remark} 
We focussed on normal form results for monotone and (co)continuous sentences, 
as these are the ones relevant to our study of parity automata.
However, generic sentences both of $\ofo$, $\ofoe$ and $\ofoei$ also enjoy 
normal form results, with the syntactic formats given by variations of the 
``basic form'' above. 
The interested reader may find in \cite{carr:mode18} a detailed 
overview of these results.
\end{remark}

We finish this section with a disucssion of the notion of \emph{separation}.

\begin{definition}
    \label{d:sep} 
Fix a one-step language $\oslang$, and two sets $A$ and $B$ with $B \sse A$.
Given a one-step model $(D,V)$, we say that $V: A \to \pow D$ \emph{separates}
$B$ if $\sz{V^{-1}(d) \cap B} \leq 1$, for every $d \in D$, \textcolor{blue}{where $V^{-1}(d) = \{ a \in A \mid   d \in
V(a)\}$}.
%
A formula $\phi \in \oslang(A)$ is \emph{$B$-separating} if $\phi$ is monotone
in $B$ and, whenever $(D,V) \models \phi$, then there exists a $B$-separating 
valuation $V' \: A \to \pow(D)$ such that $V' \leq_{B} V$ and $(D,V') \models
\phi$. 
\end{definition}

Intuitively, a formula $\phi$ is $B$-separating if its truth in a one-step model
never requires an element of the domain to satisfy two distinct predicates in 
$B$ at the same time.
% ; any valuation violating this constraint can be reduced to
% a valuation satisfying it, without sacrificing the truth of $\phi$.

\textcolor{red}{
\begin{example}
\label{ex:sep}
Let $A$ be a set of monadic predicates and let $B = \{ b_{1}, b_{2} \} \sse A$.
\begin{enumerate}[(1)]
\item 
A typical example of a formula that is \emph{not} $B$-separating is 
$\exists x\, b_{1} \land \forall y\, b_{2}(y)$.
The point is that any one-step model satisfying this formula will have at least 
one element satisfying both $b_{1}$ and $b_{2}$.
%
As another example of a formula that is not $B$-separating, take 
$\phi \isdef \exists x\, b_{1}(x) \land \exists x b_{2}(x)$.
This formula is in fact easily satisfiable in a $B$-separating model, but if we
consider a model $(D,V)$ for $\phi$ in which there is a element $d$ such that 
$V(b_{1}) = V(b_{2}) = \{ d \}$, then we cannot shrink $V$ to a $B$-separating 
valuation $V'$ such that $(D,V') \models \phi$.
\item
For an example of a formula that is $B$-separating, consider the formula
$\exists x_{1} \exists x_{2} (x_{1} \not\approx x_{2} \land b(x_{1}) \land 
b(x_{2}))$.
This example is generalised in Proposition~\ref{p:sep}.
\end{enumerate}
\end{example}
}

We do not need a full syntactic characterisation of this notion, but the 
following sufficient condition is used later on.

\begin{proposition}  
%     \label{th:onesteplogics-normalforms} %\label{th:ofoei-normalforms} 
\label{p:sep}
\begin{enumerate}[(1)]
\item 
Let $\phi \in \ofoe^{+}(A)$ be a formula in basic form, $\phi = 
\bigvee \posdbnfofoe{\vlist{T}}{\Pi}$. 
Then $\phi$ is $B$-separating if, for each disjunct,  $\sz{S \cap B} \leq 1$ for 
each $S \in \{T_1, \dots, T_k\} \cup \Pi$.
\item
Let $\phi \in {\ofoei}^{+}(A)$ be a formula in basic form, $\phi = 
\bigvee \mondbnfofoei{\vlist{T}}{\Pi}{\Sigma}{+}$. 
Then $\phi$ is $B$-separating if, for each disjunct,  $\sz{S \cap B} \leq 1$ for 
each $S \in \{T_1, \dots, T_k\} \cup \Pi \cup \Sigma$.
\end{enumerate}
\end{proposition}

\begin{proof}
We only discuss the case $\oslang = \ofoei$: a simplification of the same 
argument yields the case $\oslang = \ofoe$. 
Aassume that $(D,V) \models \phi$ for some model $(D,V)$. 
We want to construct a valuation $V' \leq_{B} V$ witnessing the $B$-separation
property. 
First, we fix one disjunct 
$\psi = \mondbnfofoei{\vlist{T}}{\Pi}{\Sigma}{+}$ of $\phi$ such that $(D,V) 
\models \psi$. 
The syntactic shape of $\psi$ implies that $(D,V)$ can be partitioned in three 
sets $D_1$, $D_2$ and $D_3$ as follows: $D_1$ contains elements $s_1, \dots,
s_k$ witnessing types $T_1,\dots, T_k,$ respectively; among the remaining
elements, there are infinitely many witnessing some $S\in \Sigma$ (these form
$D_2$), and finitely many not witnessing any $S \in \Sigma$ but each witnessing
some $R \in \Pi$ (these form $D_3$). 
In other words, we have assigned to each $d \in D$ a type $S_{d} \in
\{T_1, \dots, T_k\} \cup \Pi \cup \Sigma$ such that $d$ witnesses $S_{d}$.
Now consider the valuation $U$ that we obtain by pruning $V$ to the extent
that $U(a) \isdef V(a)$ for $a \in A \setminus B$, while $U(b) \isdef 
\{ d \in D \mid b \in S_{d}\}$.
It is then easy to see that we still have $(D,U) \models \psi$, while it is 
obvious that $U$ separates $B$ and that $U \leq_{B} A$.
Therefore $\psi$ is $B$-separating and so $\phi$ is too.
\end{proof}

\subsection{Parity automata}
\label{ssec:parityaut}

Throughout the rest of the section we fix, next to a set $\pprop$ of proposition 
letters, a one-step language $\oslang$, as defined in 
Subsection \ref{sec:onestep-short}.
In addition, we assume that we have isolated fragments 
$\oslang^+(A)$, $\cont{\oslang(A)}{B}$ and $\cocont{\oslang(A)}{B}$ consisting
of one-step formulas in $\oslang(A)$ that are respectively monotone, 
$B$-continuous and $B$-co-continuous, for $B \subseteq A$.

We first recall the definition of a general parity automaton, adapted to this
setting. 

\begin{definition}[Parity Automata] \label{def:partityaut}
A \emph{parity automaton} based on the one-step language $\oslang$ and the set
$\pprop$ of proposition letters, or briefly: an \emph{$\oslang$-automaton}, is a 
tuple $\bbA = \tup{A,\tmap,\pmap,a_I}$ such that $A$ is a finite set of states, \textcolor{blue}{also called the \emph{carrier} of $\bbA$},
$a_I \in A$ is the initial state, $\tmap: A\times \pow(\pprop) \to \oslang^+(A)$
is the transition map, and $\pmap: A \to \nat$ is the priority map.
The class of such automata will be denoted by $\Aut(\oslang)$.

Acceptance of a $\pprop$-transition system $\bbS = \tup{T,R,\tscolors,s_I}$ by
$\bbA$ is determined by the \emph{acceptance game} $\agame(\bbA,\bbS)$ of $\bbA$
on $\bbS$. 
This is the parity game defined according to the rules of the following table.
\begin{center}
\small
\begin{tabular}{|l|c|l|c|} \hline
Position & Player & Admissible moves & Priority \\
\hline
    $(a,s) \in A \times T$
  & $\eloise$
  & $\{V : A \to \pow(R[s]) \mid (R[s],V) \models \tmap (a, \tscolors(s)) \}$
  & $\pmap(a)$ 
\\
    $V : A \rightarrow \pow(T)$
  & $\abelard$
  & $\{(b,t) \mid t \in V(b)\}$
  & $0$
\\ \hline
 \end{tabular}
\end{center}
%
$\bbA$ \emph{accepts} $\bbS$ if $\eloise$ has a winning strategy in 
$\agame(\bbA,\bbS)@(a_I,s_I)$, and \emph{rejects} $\bbS$ if $(a_I,s_I)$ is 
a winning position for $\abelard$. 
We write $\Mod(\bbA)$ for the class of transition systems that are accepted
by $\bbA$ and $\TMod(\bbA)$ for the class of tree models in $\Mod(\bbA)$.
\end{definition}

Explained in words, the acceptance game $\agame(\bbA,\bbS)$ proceeds in rounds, 
each round moving from one basic position $(a,s) \in A \times T$ to the next.
At such a basic position, it is $\eloise$'s task to turn the set $R(s)$ of 
successors of $s$ into the domain of a one-step model for the formula 
$\tmap(a, \tscolors(s)) \in \oslang(A)$.
That is, she needs to come up with a valuation $V: A \to \pow(R[s])$ such that
$(R[s],V) \models \tmap (a, \tscolors(s))$ (and if she cannot find such a 
valuation, she loses immediately).
One may think of the set $\{(b,t) \mid t \in V(b)\}$ as a collection of 
witnesses to her claim that, indeed, $(R[s],V) \models \tmap (a, \tscolors(s))$.
The round ends with $\abelard$ picking one of these witnesses, which then
becomes the basic position at the start of the next round.
(Unless, of course, $\eloise$ managed to satisfy the formula $\tmap(a, 
\tscolors(s))$ with an empty set of witnesses, in which case $\abelard$ gets 
stuck and looses immediately.)

% \myparagraphns{Closure under complementation.}
Many properties of parity automata can already be determined at the one-step
level.
An important example concerns the notion of complementation, which will be used
later in this section. 
Recall the notion of (Boolean) \emph{dual} of a one-step formula 
(Definition \ref{def:one-step}). 
Following ideas from~\cite{Muller1987,DBLP:conf/calco/KissigV09}, we can use 
duals, together with a \emph{role switch} between $\abelard$ and
$\eloise$, in order to define a negation or complementation operation on 
automata.

%\begin{definition}
%\label{d:bdual1}
%Two one-step formulas $\varphi$ and $\psi$ are each other's \emph{Boolean dual}
%if for every structure $(D,V)$ we have $(D,V) \models \varphi\quad
%\text{iff}\quad (D,V^{c}) \not\models \psi$, where $V^{c}$ is the 
%valuation given by $V^{c}(a) \mathrel{:=} D \setminus V(a)$, for all $a$.
%%
%A one-step language $\oslang$ is \emph{closed under Boolean duals} if for every
%set $A$, each formula $\varphi \in \oslang(A)$ has a Boolean dual $\dual{\varphi}
%\in \oslang(A)$.
%\end{definition}



\begin{definition}
\label{d:caut}
Assume that, for some one-step language $\oslang$, the map $\dual{(\cdot)}$
provides, for each set $A$, a Boolean dual $\dual{\varphi} \in \oslang(A)$ for 
each $\varphi \in \oslang(A)$.
We define the \emph{complement} of a given $\oslang$-automaton 
$\bbA = \tup{A,\tmap,\pmap,a_I}$ as the automaton $\dual{\bbA} \isdef 
\tup{A,\dual{\tmap},\dual{\pmap},a_I}$ where $\dual{\tmap}(a,c) \isdef
\dual{(\tmap(a,c))}$, and $\dual{\pmap}(a) \isdef 1 + \pmap(a)$, for all 
$a \in A$ and $c \in \pow(\pprop)$.
\end{definition}

\begin{proposition}
\label{prop:autcomplementation}
Let $\oslang$ and $\dual{(\cdot)}$ be as in the previous definition.
For each $\bbA \in \Aut(\oslang)$ and $\bbS$ we have that $\dual{\bbA}$ accepts
$\bbS$ if and only if $\bbA$ rejects $\bbS$.
\end{proposition}

The proof of Proposition~\ref{prop:autcomplementation} is based on the fact
that the \emph{power} of $\eloise$ in $\agame(\dual{\bbA},\bbS)$ is the same
as that of $\abelard$ in $\agame(\bbA,\bbS)$, as defined 
in~\cite{DBLP:conf/calco/KissigV09}. 
As an immediate consequence, one may show that if the one-step language 
$\oslang$ is closed under duals, then the class $\Aut(\oslang)$ is closed 
under taking complementation.
Further on we will use Proposition~\ref{prop:autcomplementation} to show that
the same may apply to some subclasses of $\Aut(\oslang)$.

The automata-theoretic characterisation of $\wmso$ and $\nmso$ will use classes 
of parity automata constrained by two additional properties.
To formulate these we first introduce the notion of a \emph{cluster}.

\begin{definition}\label{def:cluster}
Let $\oslang$ be a one-step language, and let $\bbA = \tup{A,\tmap,\pmap,a_I}$
be in $\Aut(\oslang)$. 
Write $\ord$ for the reachability relation in $\bbA$, i.e., the transitive 
closure of the ``occurrence relation'' $\{ (a,b) \mid b \text{ occurs in }
\tmap(a,c) \text{ for some } c \in \pow(\pprop) \}$;
in case $a \ord b$ we say that $b$ is \emph{active} in $a$.
A \emph{cluster} of $\bbA$ is a cell of the equivalence relation generated by 
the relation $\ord \cap \succ$ (i.e., the intersection of $\ord$ with its 
converse).
A cluster is called \emph{degenerate} if it consists of a  single element which
is not active in itself.
\end{definition}

\begin{remark}\label{rem:cluster}
Observe that any cluster of an automaton is either degenerate, or else each
of its states is active in itself and in any other state of the cluster.
Observe too that there is a natural order on clusters: we may say that one
cluster is \emph{higher} than another if each member of the second cluster
if active in each member of the first.
We may assume without loss of generality that the initial state belongs to the
highest cluster of the automaton.
\end{remark}

We can now formulate the mentioned requirements on $\oslang$-automata as follows.

\begin{definition}
\label{d:wk}
\label{d:ctwk}
Let $\bbA = \tup{A,\tmap,\pmap,a_I}$ be some $\oslang$-automaton.
We say that $\bbA$ is \emph{weak} if $\pmap(a) = \pmap(b)$ whenever $a$ and $b$
belong to the same cluster.
For the property of \emph{continuity} we require that, for any cluster $M$, any
state $a \in M$ and any $c \in \pow\pprop$, we have that 
$\pmap(a) = 1$ implies $\tmap(a,c) \in \cont{\oslang(A)}{M}$
and 
$\pmap(a) = 0$ implies $\tmap(a,c) \in \cocont{\oslang(A)}{M}$.

We call a parity automaton $\bbA \in \Aut(\oslang)$ \emph{weak-continuous} if it 
satisfies both properties, weakness and continuity.
The classes of weak and weak-continuous automata are denoted as $\AutW(\oslang)$
and $\AutWC(\oslang)$, respectively.
\end{definition}

% \begin{definition}
% \label{d:wk}
% \label{d:ctwk}
% Let $\oslang$ be a one-step language, and let $\bbA = \tup{A,\tmap,\pmap,a_I}$
% be in $\Aut(\oslang)$. Write $\ord$ for the reachability relation in $\bbA$, i.e.
% the reflexive-transitive closure of $\{ (a,b) \mid \exists c. b \text{ occurs 
% in }\tmap(a,c)\}$. 
% A \emph{strongly connected $\ord$-component} ($\ord$-SCC) is a subset $M
% \subseteq A$ such that, for every $a,b \in M$ we have $a \ord b$ and $b \ord c$.
% The SCC is called \emph{maximal} (MSCC) when $M\cup\{a\}$ ceases to be a SCC for
% any choice of $a \in A\setminus M$.
% We formulate two requirements on automata from $\Aut(\oslang)$:
% \begin{description}
% \item[(weakness)] if $a \ord b$ and $b \ord a$ then $\pmap(a) = \pmap(b)$.
% \item[(continuity)] if $a \ord b$ and $b \ord a$, then for any $c\in C$:
%   \\ if ${\pmap(a)}=1$ then $\tmap(a,c)$ is syntactically continuous in $b$,
%      i.e., $\tmap(a,c) \in \cont{\oslang}{b}(A)$;
%   \\ if ${\pmap(a)}=0$ then $\tmap(a,c)$ is syntactically co-continuous in $b$,
%      i.e., $\tmap(a,c) \in \cocont{\oslang}{b}(A)$.
% \end{description}
% We call a parity automaton $\bbA \in \Aut(\oslang)$ \emph{weak} if it satisfies
% \emph{(weakness)}, and \emph{weak-continuous} if it additionally satisfies 
% \emph{(continuity)}.
% The classes of weak and weak-continuous automata are denoted as $\AutW(\oslang)$
% and $\AutWC(\oslang)$, respectively.
% \end{definition}

Intuitively, weakness forbids an automaton to register 
\textcolor{red}{non-trivial}
properties 
concerning the vertical `dimension' of input trees \textcolor{blue}{such as 
``there is a path in which infinitely many nodes satisfy $p$''}, whereas continuity expresses
a constraint on how much of the horizontal `dimension' of an input tree the 
automaton is allowed to process. 
In terms of second-order logic, they correspond respectively to quantification 
over `vertically' finite (i.e. included in well-founded subtrees) and 
`horizontally' finite (i.e. included in finitely branching subtrees) sets. 
The conjunction of weakness and continuity thus corresponds to quantification 
over finite sets. 

\begin{remark}\label{rmk:weak01}
Any weak parity automaton $\bbA$ is equivalent to a special weak automaton
$\bbA'$ with $\pmap: A' \to \{0,1\}$. 
This is because \emph{(weakness)} prevents states of different parity to occur
infinitely often in acceptance games; so we may just replace any even priority 
with $0$, and any odd priority with $1$.
We shall assume such a restricted priority map for weak parity automata.
\end{remark}

\subsection{$\mu$-Calculi}
\label{sec:onestep-to-mc}

We now see how to associate, with each one-step language $\oslang$, the 
following variant $\mu\oslang$ of the modal $\mu$-calculus.
These logics are of a fairly artificial nature; their main use is to smoothen
the translations from automata to second-order formulas further on.

\begin{definition}
Given a one-step language $\oslang$, we define the language $\mu\oslang$ of the 
\emph{$\mu$-calculus over $\oslang$}  by the following grammar:
% \[
% \varphi \isbnf  q \mid \neg\varphi \mid \varphi\lor\varphi 
%    \mid \nxt{\al}(\varphi_{1},\ldots,\varphi_{n})
%    \mid \mu p. \varphi',
% \]
\[
\varphi \isbnf  
   q \mid \neg q 
   \mid \varphi\lor\varphi \mid \varphi\land\varphi 
   \mid \nxt{\al}(\varphi_{1},\ldots,\varphi_{n})
   \mid \mu p. \varphi'    \mid \nu p. \varphi',
\]
where $p,q \in\Prop$, $\al(a_{1},\ldots,a_{n}) \in \oslang^{+}$ and $\varphi'$ 
is monotone in $p$.

As in the case of the modal $\mu$-calculus $\muML$, we will freely use standard
syntactic concepts and notations related to this language.
\end{definition}

Observe that the language $\mu\oslang$ generally has a wealth of modalities:
one for each one-step formula in $\oslang$.

The semantics of this language is given as follows.

\begin{definition}
Let $\bbS$ be a transition system.
The satisfaction relation $\mmodels$ is defined in the standard way, with the 
following clause for the modality $\nxt{\alpha}$:
\begin{equation}\label{eq:mumod}
\bbS \mmodels \nxt{\al}(\varphi_{1},\ldots,\varphi_{n})
\quad\text{iff}\quad 
(R[s_{I}],V_{\overline{\varphi}}) \models \al(a_{1},\ldots,a_{n}),
\end{equation}
where $V_{\overline{\varphi}}$ is the one-step valuation given by 
\begin{equation}\label{eq:valmod}
V_{\overline{\varphi}}(a_{i}) \isdef 
  \{ t \in R[s_{I}] \mid \bbS.t \mmodels \varphi_{i}\}.
\end{equation}
\end{definition}

\begin{example}
\label{ex:mul1}
\begin{enumerate}[(1)]
\item
If we identify the modalities $\nxt{\Diamond a}$ and $\nxt{\Box a}$ of the basic
modal one-step language $\oml$ (cf.~Definition~\ref{d:oml}) with the standard
$\Diamond$ and $\Box$ operators, we may observe that $\mu(\oml)$ corresponds to
the standard modal $\mu$-calculus: $\mu(\oml) = \muML$.
\item
Consider the one-step formulas 
$\al = \exists x (a_{1}(x) \land \forall y\, a_{2}(y))$,
$\beta = \exists x y (x \not\foeq y \land a_{1}(x) \land a_{1}(y))$, and
$\gamma = \wqu x (a_{1}(x), a_{2}(x))$.
Then $\nxt{\al}(\phi_{1},\phi_{2})$ is equivalent to the modal formula
$\Diamond \phi_{1} \land \Box \phi_{2}$ and 
$\nxt{\beta}(\phi)$ expresses that the current state has at least two 
successors where $\phi$ holds.
The formula $\nxt{\gamma}(\phi_{1},\phi_{2})$ holds at a state $s$ if all 
its successors satisfy $\phi_{1}$ or $\phi_{2}$, while at most finitely
many successors refute $\phi_{2}$.
Neither $\nxt{\beta}$ nor $\nxt{\gamma}$ can be expressed in standard modal 
logic.
\item
If the one-step language $\oslang$ is closed under taking disjunctions  
(conjunctions, respectively), it is easy to see that 
$\nxt{\al\lor\beta}(\ol{\phi}) \equiv \nxt{\al}(\ol{\phi}) \lor 
\nxt{\beta}(\ol{\phi})$ 
($\nxt{\al\land\beta}(\ol{\phi}) \equiv \nxt{\al}(\ol{\phi}) \land 
\nxt{\beta}(\ol{\phi})$, respectively).
\end{enumerate}
\end{example}

Alternatively but equivalently, one may interpret the language
game-theoretically.

\begin{definition}
Given a $\mu\oslang$-formula $\phi$ and a model $\bbS$ we define the 
\emph{evaluation game} $\egame(\varphi,\bbS)$ as the two-player infinite
game %of which the 
whose rules are given in the next table.
% Table~\ref{tab:EGL}.%
%\begin{table}[htb]
\begin{center}
\begin{tabular}{|l|c|l|c|}
\hline
Position & Player & Admissible moves
\\\hline
    $(q,s)$, with $q \in \FV(\phi) \cap \tscolors(s)$ 
  & $\abelard$ 
  & $\emptyset$
\\  $(q,s)$, with $q \in \FV(\phi) \setminus \tscolors(s)$ 
  & $\eloise$ & $\emptyset$
\\  $(\lnot q,s)$, with $q \in \FV(\phi) \cap \tscolors(s)$ 
  & $\eloise$ 
  & $\emptyset$
\\  $(\lnot q,s)$, with $q \in \FV(\phi) \setminus \tscolors(s)$ 
  & $\abelard$ 
  & $\emptyset$
\\ $(\psi_1 \lor \psi_2,s)$ 
  & $\eloise$ 
  & $\{(\psi_1,s),(\psi_2,s) \}$ 
\\  $(\psi_1 \land \psi_2,s)$ 
  & $\abelard$ 
  & $\{(\psi_1,s),(\psi_2,s) \}$ 
\\  $(\nxt{\al}(\varphi_{1},\ldots,\varphi_{n}),s)$ 
  & $\eloise$ 
  & $\{ Z \sse \{ \varphi_{1},\ldots,\varphi_{n} \} \times R[s]
     \mid (R[s],V^{*}_{Z}) \models \al(\ol{a}) \}$ 
\\  $Z \sse  \Sfor(\phi) \times S$
  & $\abelard$
  & $\{ (\psi, s) \mid (\psi,s) \in Z \}$
\\  $(\mu p.\varphi,s)$ & $-$ & $\{(\varphi,s) \}$ 
\\  $(\nu p.\varphi,s)$ & $-$ & $\{(\varphi,s) \}$ 
\\  $(p,s)$, with $p \in \BV(\phi)$ & $-$ & $\{(\delta_p,s) \}$ \\
  \hline
\end{tabular}
\end{center}
 %\caption{Evaluation game for $\mu\oslang$}
%\caption{}
%\label{tab:EGL}
%\end{table}
For the admissible moves at a position of the form 
$(\nxt{\al}(\varphi_{1},\ldots,\varphi_{n}),s)$, we consider the valuation 
$V^{*}_{Z}: \{ a_{1}, \ldots, a_{n} \} \to \pow(R[s])$, given by
$V^{*}_{Z}(a_{i}) \isdef \{ t \in R[s] \mid (\phi_{i},t) \in Z \}$.
The winning conditions of $\egame(\varphi,\bbS)$ are standard: $\eloise$ wins
those infinite matches of which the highest variable that is unfolded infinitely
often during the match is a $\mu$-variable.
\end{definition}

The following proposition, 
stating the adequacy of the evaluation game for the semantics of $\mu\oslang$,
is formulated explicitly for future reference.
We omit the proof, which is completely routine.

\begin{fact}[Adequacy]
\label{f:adeqmu}
For any formula $\phi \in \mu\oslang$ and any model $\bbS$ the following 
equivalence holds:
\[
\bbS \mmodels \phi
\quad\text{iff}\quad 
(\phi,s_{I}) \text{ is a winning position for $\eloise$ in } 
\egame(\varphi,\bbS).
\]
\end{fact}

We will be specifically interested in two fragments of $\mu\oslang$, associated 
with the properties of being noetherian and continuous, respectively, and with 
the associated variants of the $\mu$-calculus $\mu\oslang$ where the use of the 
fixpoint operator $\mu$ is restricted to formulas belonging to these two
respective fragments.

\begin{definition}
Let $\qprop$ be a set  of proposition letters.
We first define the fragment $\noe{\mu\oslang}{\qprop}$ of $\mu\oslang$ of 
formulas that are syntactically \emph{noetherian} in $\qprop$ by the following 
grammar:
\begin{equation*}
   \varphi \isbnf  q
   \mid \psi
   \mid \varphi \lor \varphi
   \mid \varphi \land \varphi
   \mid \nxt{\al}(\varphi_{1},\ldots,\varphi_{n})
   \mid \mu p.\phi'
\end{equation*}
where $q \in \qprop$, $\psi$ is a $\qprop$-free $\muML$-formula,
$\al(a_{1},\ldots,a_{n}) \in \oslang^{+}$ and 
$\phi' \in \noe{\mu\oslang}{\qprop\cup\{p\}}$. 
The \emph{co-noetherian} fragment $\conoe{\mu\oslang}{Q}$ is defined dually.

Similarly, we define the fragment $\cont{\mu\oslang}{\qprop}$ of 
$\mu\oslang$-formulas that are syntactically \emph{continuous} in $\qprop$ as
follows:
\begin{equation*}
   \varphi \isbnf  q
   \mid \psi
   \mid \varphi \lor \varphi
   \mid \varphi \land \varphi
   \mid 
   \nxt{\al}(\varphi_{1},\ldots,\varphi_{k},\psi_{1},\ldots,\psi_{m})
   \mid \mu p.\phi'
\end{equation*}
where $p\in\Prop$, $q \in \qprop$, $\psi$, $\psi_{i}$ are $\qprop$-free 
$\mu\oslang$-formula, $\al(a_{1},\ldots,a_{k},b_{1},\ldots,b_{m}) \in 
\cont{\oslang}{\ol{a}}(\ol{a},\ol{b})$,
and $\phi' \in \cont{\mu\oslang}{\qprop\cup\{p\}}$. 
The \emph{co-continuous} fragment $\cocont{\mu\oslang}{Q}$ is defined dually.
\end{definition}

Based on this we can now define the mentioned variants 
% $\mu_{N}\oslang$ and $\mu_{C}\oslang$ 
of the $\mu$-calculus $\mu\oslang$ where the use of the least (greatest) 
fixpoint operator can only be applied to formulas that belong to, 
respectively, the noetherian (co-noetherian) and continuous (co-continuous)
fragment of the language that we are defining.

\begin{definition}
The formulas of the \emph{alternation-free} $\mu$-calculus $\mu_{N}\oslang$ 
are defined by the following grammar:
\begin{equation*}
   \varphi \isbnf  
      q \mid \neg q 
   \mid \varphi\lor\varphi \mid \varphi\land\varphi 
   \mid \nxt{\al}(\varphi_{1},\ldots,\varphi_{n})
   \mid \mu p. \varphi'    
   \mid \nu p. \varphi'',
\end{equation*} 
where $\al(a_{1},\ldots,a_{n}) \in \oslang^{+}$,
$\phi' \in \mu_{N}\oslang \cap \noe{\mu\oslang}{p}$
and dually $\phi'' \in \mu_{N}\oslang \cap \conoe{\mu\oslang}{p}$.

Similarly, the formulas of the \emph{continuous} $\mu$-calculus $\mu_{C}\oslang$
are given by the grammar
\begin{equation*}
   \varphi \isbnf  
      q \mid \neg q 
   \mid \varphi\lor\varphi \mid \varphi\land\varphi 
   \mid \nxt{\al}(\varphi_{1},\ldots,\varphi_{n})
   \mid \mu p. \varphi'    
   \mid \nu p. \varphi'',
\end{equation*} 
where $\al(a_{1},\ldots,a_{n}) \in \oslang^{+}$,
$\phi' \in \mu_{C}\oslang \cap \cont{\mu\oslang}{p}$
and dually $\phi'' \in \mu_{C}\oslang \cap \cocont{\mu\oslang}{p}$.
\end{definition}

\begin{example}
Following up on Example~\ref{ex:mul1}, it is easy to verify that 
$\mu_{N}\oml = \mudML$ and $\mu_{C}\oml = \mucML$.
\end{example}
%%%

%%%%%%%% FOR LONG VERSION USE THE FOLLOWING TWO FILES
%\input{neutral/ssec-4-aut-to-fma}
%\input{neutral/ssec-4-fma-to-aut}

%%%%%%%% SHORT VERSION
\input{neutral/ssec-4-af}



